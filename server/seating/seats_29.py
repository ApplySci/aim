"""
*** imperfect allocations:
+-----------+---------+--------+---------+--------+------------+
|   players |   total | wind   | table   | meet   | indirect   |
|-----------+---------+--------+---------+--------+------------|
|        88 |       0 |        |         |        |            |
+-----------+---------+--------+---------+--------+------------+
***

Seating for mahjong tournaments with 29 hanchan. 
Designed to: minimize repeat meetups between players, and repeat 
visits to tables; balance wind allocations; 
and maximise the number of indirect meets between 
any pair of players, via a third player.

Variable "seats" is dict of seating arrangements. 
Each key is the number of players. 
The corresponding dict value is a list of hanchan. 
Each hanchan is a list of tables. 
Each table is a list of players, indexed from 1 upwards, in wind order (ESWN).

Created by Andrew ZP Smith (ZAPS) 
https://github.com/ApplySci/aim/

Built on original SGP solutions from Alice Miller:
"Breakout Group Allocation Schedules and the Social Golfer 
Problem with Adjacent Group Sizes", by Alice Miller, 
Matthew Barr, William Kavanagh, Ivaylo Valkov and Helen C. Purchase.
DOI:10.3390/sym13010013 , Symmetry, December 2020

Using additional mahjong-specific criteria devised & 
originally implemented by Martin Lester:
"Scheduling Reach Mahjong Tournaments Using Pseudoboolean Constraints" 
by Martin Mariusz Lester. DOI:10.1007/978-3-030-80223-3_24 , 
Theory and Applications of Satisfiability Testing : 
SAT 2021 Lecture Notes in Computer Science, 2021, p. 349-358

My apologies to all for taking their beautiful combinatorial approaches
and building a mess of brute force optimisations on top of them.
"""

seats = {
    88: [[[1, 28, 41, 46],
     [2, 27, 34, 53],
     [4, 25, 39, 48],
     [8, 21, 38, 49],
     [13, 16, 40, 47],
     [3, 26, 36, 51],
     [6, 23, 43, 44],
     [30, 57, 70, 75],
     [31, 56, 63, 82],
     [33, 54, 68, 77],
     [37, 50, 67, 78],
     [42, 45, 69, 76],
     [32, 55, 65, 80],
     [35, 52, 72, 73],
     [12, 17, 59, 86],
     [5, 24, 60, 85],
     [10, 19, 62, 83],
     [9, 20, 66, 79],
     [11, 18, 71, 74],
     [7, 22, 61, 84],
     [14, 15, 64, 81],
     [29, 58, 87, 88]],
     [[6, 27, 50, 41],
     [64, 21, 12, 85],
     [32, 72, 30, 77],
     [58, 62, 7, 26],
     [59, 19, 14, 61],
     [53, 28, 38, 5],
     [70, 79, 56, 35],
     [55, 36, 4, 88],
     [45, 46, 8, 25],
     [60, 31, 87, 2],
     [20, 13, 73, 76],
     [3, 43, 1, 48],
     [42, 49, 18, 15],
     [63, 86, 9, 24],
     [68, 11, 22, 81],
     [82, 57, 34, 67],
     [80, 52, 39, 69],
     [84, 33, 29, 65],
     [17, 16, 66, 83],
     [40, 10, 51, 23],
     [71, 47, 78, 44],
     [74, 75, 54, 37]],
     [[47, 48, 10, 27],
     [77, 39, 56, 76],
     [7, 1, 55, 40],
     [58, 23, 14, 66],
     [2, 6, 57, 38],
     [82, 41, 71, 54],
     [60, 9, 64, 28],
     [70, 13, 24, 83],
     [85, 68, 18, 19],
     [34, 79, 74, 32],
     [21, 63, 61, 16],
     [69, 84, 36, 30],
     [62, 87, 4, 33],
     [25, 12, 42, 53],
     [44, 51, 20, 17],
     [78, 15, 75, 22],
     [88, 8, 43, 52],
     [50, 5, 45, 3],
     [67, 35, 31, 86],
     [37, 29, 72, 81],
     [73, 49, 46, 80],
     [59, 11, 26, 65]],
     [[38, 83, 78, 36],
     [79, 26, 19, 82],
     [88, 16, 57, 46],
     [86, 45, 75, 29],
     [77, 53, 84, 50],
     [1, 15, 69, 63],
     [64, 68, 13, 3],
     [76, 85, 33, 41],
     [72, 60, 22, 23],
     [67, 65, 20, 25],
     [2, 14, 52, 51],
     [66, 8, 37, 87],
     [10, 32, 6, 42],
     [11, 30, 5, 44],
     [73, 40, 34, 59],
     [71, 35, 39, 61],
     [47, 56, 12, 4],
     [81, 43, 31, 80],
     [55, 48, 21, 24],
     [9, 54, 49, 7],
     [70, 27, 62, 18],
     [58, 17, 28, 74]],
     [[81, 48, 67, 42],
     [64, 49, 41, 84],
     [18, 14, 50, 40],
     [28, 73, 75, 4],
     [79, 47, 43, 69],
     [20, 55, 35, 12],
     [76, 21, 72, 11],
     [59, 51, 60, 39],
     [23, 9, 77, 71],
     [78, 6, 70, 26],
     [2, 80, 68, 1],
     [27, 61, 5, 58],
     [38, 52, 13, 19],
     [57, 17, 15, 33],
     [66, 7, 25, 82],
     [62, 86, 46, 44],
     [65, 37, 83, 53],
     [3, 56, 88, 34],
     [54, 36, 24, 8],
     [74, 45, 87, 16],
     [85, 32, 29, 63],
     [30, 22, 31, 10]],
     [[58, 10, 64, 25],
     [39, 6, 88, 54],
     [20, 60, 15, 62],
     [65, 13, 86, 22],
     [75, 38, 76, 55],
     [49, 4, 2, 44],
     [87, 61, 3, 32],
     [78, 73, 33, 31],
     [14, 74, 21, 77],
     [81, 40, 70, 53],
     [67, 17, 84, 18],
     [19, 50, 16, 43],
     [80, 71, 36, 57],
     [27, 59, 63, 8],
     [66, 34, 85, 30],
     [46, 26, 9, 47],
     [51, 7, 42, 28],
     [23, 12, 69, 82],
     [35, 83, 29, 68],
     [41, 52, 11, 24],
     [72, 48, 79, 45],
     [5, 37, 56, 1]],
     [[61, 13, 67, 28],
     [21, 58, 70, 20],
     [84, 43, 56, 73],
     [57, 9, 42, 3],
     [87, 64, 35, 6],
     [24, 80, 77, 17],
     [23, 65, 63, 18],
     [62, 66, 1, 11],
     [78, 29, 79, 41],
     [46, 22, 53, 19],
     [5, 47, 7, 52],
     [83, 74, 31, 39],
     [68, 60, 25, 16],
     [2, 54, 45, 10],
     [27, 14, 44, 55],
     [71, 32, 86, 38],
     [76, 81, 36, 34],
     [85, 15, 72, 26],
     [49, 12, 50, 88],
     [82, 75, 48, 51],
     [37, 59, 33, 69],
     [8, 30, 40, 4]],
     [[74, 22, 66, 2],
     [17, 72, 7, 68],
     [61, 33, 79, 49],
     [80, 37, 60, 45],
     [62, 3, 78, 21],
     [43, 65, 39, 75],
     [15, 9, 48, 34],
     [36, 46, 10, 14],
     [27, 26, 76, 64],
     [71, 69, 88, 24],
     [32, 4, 20, 50],
     [53, 11, 29, 13],
     [84, 35, 85, 47],
     [86, 83, 23, 1],
     [16, 8, 51, 31],
     [30, 25, 52, 28],
     [41, 87, 12, 70],
     [57, 59, 81, 54],
     [55, 56, 6, 18],
     [77, 44, 63, 38],
     [82, 58, 40, 42],
     [73, 5, 19, 67]],
     [[65, 54, 70, 52],
     [16, 44, 3, 33],
     [76, 10, 59, 9],
     [39, 18, 1, 38],
     [63, 72, 57, 49],
     [11, 42, 8, 35],
     [81, 12, 83, 7],
     [61, 4, 15, 74],
     [87, 53, 82, 24],
     [36, 41, 25, 23],
     [62, 32, 45, 73],
     [40, 64, 71, 37],
     [22, 26, 29, 48],
     [75, 56, 50, 60],
     [88, 19, 84, 80],
     [69, 6, 66, 13],
     [46, 27, 21, 31],
     [14, 86, 5, 78],
     [2, 85, 17, 79],
     [77, 51, 58, 55],
     [68, 30, 47, 67],
     [34, 28, 43, 20]],
     [[63, 54, 42, 62],
     [87, 19, 77, 48],
     [5, 83, 71, 4],
     [78, 2, 7, 76],
     [22, 41, 55, 16],
     [27, 11, 39, 57],
     [65, 60, 49, 47],
     [80, 74, 12, 26],
     [37, 6, 3, 30],
     [23, 38, 29, 15],
     [28, 10, 69, 85],
     [66, 32, 35, 59],
     [53, 21, 17, 43],
     [58, 44, 52, 67],
     [20, 36, 18, 31],
     [34, 13, 33, 25],
     [72, 82, 46, 50],
     [86, 40, 68, 56],
     [51, 84, 45, 70],
     [61, 64, 8, 1],
     [73, 81, 9, 88],
     [75, 24, 14, 79]],
     [[24, 73, 23, 61],
     [56, 49, 22, 25],
     [42, 77, 34, 86],
     [39, 37, 84, 79],
     [74, 41, 60, 35],
     [12, 45, 31, 6],
     [75, 59, 18, 88],
     [82, 81, 44, 32],
     [29, 1, 47, 17],
     [76, 30, 58, 46],
     [14, 4, 69, 65],
     [78, 85, 54, 51],
     [15, 3, 53, 52],
     [27, 80, 20, 83],
     [28, 71, 19, 63],
     [72, 62, 40, 36],
     [48, 5, 57, 13],
     [11, 33, 7, 43],
     [64, 70, 16, 2],
     [26, 66, 68, 21],
     [10, 50, 55, 8],
     [87, 9, 67, 38]],
     [[71, 45, 49, 81],
     [72, 8, 80, 28],
     [86, 66, 43, 51],
     [24, 12, 32, 33],
     [4, 3, 82, 70],
     [23, 78, 13, 74],
     [62, 53, 61, 41],
     [20, 16, 42, 52],
     [56, 10, 26, 38],
     [57, 37, 22, 14],
     [6, 77, 1, 75],
     [34, 31, 65, 58],
     [50, 69, 83, 44],
     [5, 36, 2, 29],
     [79, 25, 73, 11],
     [88, 7, 63, 60],
     [85, 39, 55, 67],
     [30, 35, 19, 17],
     [64, 48, 46, 59],
     [21, 54, 15, 40],
     [84, 68, 27, 9],
     [76, 18, 47, 87]],
     [[77, 35, 82, 37],
     [54, 23, 47, 20],
     [36, 7, 65, 87],
     [10, 29, 4, 43],
     [52, 83, 76, 49],
     [61, 69, 26, 17],
     [56, 15, 28, 45],
     [64, 19, 24, 66],
     [80, 79, 30, 42],
     [27, 86, 16, 73],
     [8, 48, 6, 53],
     [11, 3, 55, 46],
     [9, 31, 5, 41],
     [75, 84, 40, 32],
     [58, 39, 33, 72],
     [74, 57, 85, 44],
     [62, 14, 88, 68],
     [63, 67, 12, 2],
     [13, 51, 1, 50],
     [38, 34, 60, 70],
     [22, 21, 59, 71],
     [81, 18, 25, 78]],
     [[59, 3, 85, 25],
     [84, 42, 44, 60],
     [63, 81, 51, 35],
     [18, 10, 53, 33],
     [83, 30, 61, 56],
     [43, 72, 14, 87],
     [1, 54, 27, 32],
     [58, 49, 86, 37],
     [38, 48, 16, 12],
     [69, 21, 75, 7],
     [31, 15, 55, 13],
     [19, 70, 9, 74],
     [73, 71, 2, 26],
     [88, 66, 78, 28],
     [67, 41, 77, 45],
     [23, 5, 80, 64],
     [36, 11, 17, 50],
     [57, 8, 20, 29],
     [65, 46, 79, 40],
     [68, 24, 76, 4],
     [34, 6, 52, 22],
     [47, 82, 62, 39]],
     [[49, 36, 66, 77],
     [73, 70, 17, 10],
     [16, 58, 85, 11],
     [55, 62, 81, 30],
     [71, 34, 51, 72],
     [48, 20, 7, 37],
     [1, 33, 26, 52],
     [65, 8, 78, 19],
     [25, 2, 50, 35],
     [63, 14, 80, 13],
     [39, 12, 46, 15],
     [68, 44, 41, 75],
     [40, 27, 88, 45],
     [79, 31, 54, 64],
     [56, 29, 74, 69],
     [24, 47, 38, 3],
     [18, 9, 61, 82],
     [86, 57, 28, 87],
     [22, 43, 42, 5],
     [67, 53, 76, 32],
     [60, 21, 6, 83],
     [59, 4, 23, 84]],
     [[33, 50, 70, 71],
     [52, 31, 75, 66],
     [55, 57, 73, 68],
     [16, 72, 69, 9],
     [39, 26, 44, 28],
     [15, 86, 84, 10],
     [60, 8, 81, 17],
     [18, 7, 77, 64],
     [46, 2, 23, 37],
     [36, 19, 47, 6],
     [83, 58, 3, 22],
     [13, 62, 79, 12],
     [48, 76, 35, 65],
     [14, 45, 38, 11],
     [21, 42, 41, 4],
     [54, 61, 80, 29],
     [24, 1, 34, 49],
     [53, 78, 30, 63],
     [87, 85, 56, 27],
     [20, 82, 59, 5],
     [43, 67, 40, 74],
     [51, 88, 25, 32]],
     [[17, 45, 4, 34],
     [46, 63, 33, 74],
     [15, 79, 6, 58],
     [83, 25, 87, 54],
     [1, 85, 81, 20],
     [48, 31, 68, 69],
     [37, 42, 24, 26],
     [3, 18, 86, 80],
     [11, 77, 10, 60],
     [44, 88, 35, 21],
     [30, 27, 23, 49],
     [14, 70, 7, 67],
     [13, 82, 8, 84],
     [39, 40, 2, 19],
     [16, 75, 62, 5],
     [50, 64, 73, 29],
     [55, 66, 53, 71],
     [41, 38, 72, 65],
     [32, 28, 22, 47],
     [52, 78, 56, 59],
     [51, 76, 61, 57],
     [12, 43, 9, 36]],
     [[8, 5, 32, 39],
     [28, 76, 82, 14],
     [46, 60, 69, 54],
     [7, 73, 85, 6],
     [52, 84, 74, 48],
     [42, 59, 29, 70],
     [41, 88, 30, 13],
     [50, 79, 21, 87],
     [53, 47, 86, 72],
     [2, 83, 75, 11],
     [44, 65, 64, 56],
     [26, 81, 77, 16],
     [51, 67, 49, 62],
     [68, 37, 34, 61],
     [1, 71, 58, 12],
     [45, 55, 19, 23],
     [38, 33, 22, 20],
     [35, 36, 27, 15],
     [9, 78, 80, 4],
     [25, 17, 31, 40],
     [10, 63, 3, 66],
     [43, 18, 24, 57]],
     [[6, 20, 74, 68],
     [4, 63, 79, 22],
     [31, 88, 26, 53],
     [25, 1, 72, 70],
     [48, 86, 36, 85],
     [24, 2, 58, 84],
     [34, 80, 62, 50],
     [3, 75, 67, 23],
     [21, 33, 51, 5],
     [17, 9, 32, 52],
     [44, 66, 40, 76],
     [35, 49, 16, 10],
     [46, 61, 38, 81],
     [18, 69, 8, 73],
     [28, 77, 65, 27],
     [43, 59, 83, 41],
     [45, 78, 39, 64],
     [42, 87, 13, 71],
     [14, 12, 30, 54],
     [19, 56, 57, 7],
     [29, 60, 82, 55],
     [47, 15, 37, 11]],
     [[53, 57, 60, 79],
     [35, 5, 18, 46],
     [12, 78, 11, 61],
     [6, 76, 17, 63],
     [13, 44, 10, 37],
     [9, 83, 85, 14],
     [21, 2, 82, 86],
     [54, 56, 67, 72],
     [31, 28, 50, 24],
     [42, 73, 66, 39],
     [7, 16, 80, 59],
     [29, 62, 52, 77],
     [45, 22, 1, 36],
     [19, 4, 81, 58],
     [49, 69, 32, 70],
     [26, 84, 87, 55],
     [51, 30, 65, 74],
     [47, 75, 64, 34],
     [41, 20, 3, 40],
     [33, 88, 23, 48],
     [38, 25, 27, 43],
     [15, 68, 71, 8]],
     [[53, 51, 69, 64],
     [3, 14, 73, 60],
     [30, 20, 26, 45],
     [32, 15, 43, 2],
     [9, 58, 8, 75],
     [13, 85, 4, 77],
     [33, 42, 19, 27],
     [37, 88, 17, 38],
     [5, 65, 68, 12],
     [31, 61, 44, 72],
     [48, 71, 62, 56],
     [52, 87, 81, 23],
     [41, 7, 10, 34],
     [49, 74, 59, 55],
     [50, 76, 54, 86],
     [28, 83, 18, 79],
     [40, 35, 24, 22],
     [11, 80, 82, 6],
     [47, 25, 57, 21],
     [36, 39, 70, 63],
     [1, 16, 84, 78],
     [29, 67, 46, 66]],
     [[5, 88, 74, 76],
     [25, 55, 37, 9],
     [3, 2, 81, 69],
     [36, 56, 13, 21],
     [33, 64, 30, 86],
     [18, 34, 16, 29],
     [22, 77, 12, 73],
     [52, 40, 61, 60],
     [6, 28, 59, 62],
     [49, 82, 43, 68],
     [10, 24, 72, 78],
     [7, 27, 71, 79],
     [46, 17, 87, 75],
     [19, 51, 15, 41],
     [8, 67, 26, 83],
     [20, 39, 53, 14],
     [47, 63, 45, 58],
     [38, 84, 54, 66],
     [32, 31, 11, 23],
     [4, 35, 57, 1],
     [48, 70, 44, 80],
     [50, 42, 65, 85]],
     [[80, 35, 75, 33],
     [58, 68, 32, 36],
     [70, 85, 37, 31],
     [28, 11, 48, 49],
     [34, 63, 87, 5],
     [1, 53, 44, 9],
     [77, 40, 57, 78],
     [8, 41, 2, 56],
     [69, 19, 20, 86],
     [67, 24, 15, 59],
     [83, 55, 72, 42],
     [73, 38, 82, 30],
     [81, 50, 74, 47],
     [65, 61, 10, 88],
     [43, 26, 13, 54],
     [45, 18, 52, 21],
     [23, 79, 76, 16],
     [4, 46, 51, 6],
     [7, 3, 29, 39],
     [62, 22, 64, 17],
     [25, 71, 14, 84],
     [66, 12, 60, 27]],
     [[80, 40, 38, 85],
     [30, 2, 18, 48],
     [12, 44, 34, 8],
     [77, 31, 59, 47],
     [67, 69, 27, 22],
     [83, 33, 45, 82],
     [14, 29, 49, 6],
     [26, 23, 50, 57],
     [4, 53, 54, 16],
     [86, 52, 55, 79],
     [84, 21, 81, 28],
     [68, 87, 39, 10],
     [72, 64, 20, 88],
     [17, 3, 71, 65],
     [75, 61, 42, 36],
     [11, 51, 56, 9],
     [15, 70, 5, 66],
     [74, 24, 25, 62],
     [41, 63, 37, 73],
     [78, 43, 58, 35],
     [32, 46, 13, 7],
     [60, 1, 76, 19]],
     [[30, 39, 16, 24],
     [66, 50, 48, 61],
     [59, 68, 53, 45],
     [35, 34, 14, 26],
     [37, 32, 21, 19],
     [44, 18, 54, 22],
     [7, 4, 38, 31],
     [83, 47, 73, 51],
     [41, 57, 58, 69],
     [64, 55, 63, 43],
     [86, 70, 11, 88],
     [36, 67, 33, 60],
     [40, 29, 28, 12],
     [87, 20, 49, 78],
     [6, 72, 5, 84],
     [82, 74, 1, 10],
     [76, 25, 80, 15],
     [79, 77, 3, 8],
     [75, 13, 27, 81],
     [9, 62, 65, 2],
     [42, 23, 17, 56],
     [85, 52, 46, 71]],
     [[84, 34, 83, 46],
     [12, 10, 52, 57],
     [64, 38, 74, 42],
     [88, 82, 22, 85],
     [56, 53, 80, 58],
     [73, 1, 21, 65],
     [54, 17, 5, 55],
     [69, 87, 11, 40],
     [16, 71, 6, 67],
     [45, 13, 9, 35],
     [81, 86, 41, 39],
     [33, 14, 47, 8],
     [79, 44, 36, 59],
     [66, 72, 4, 18],
     [43, 62, 37, 76],
     [15, 7, 50, 30],
     [60, 78, 32, 48],
     [70, 23, 28, 68],
     [26, 75, 63, 25],
     [19, 49, 31, 3],
     [61, 77, 2, 20],
     [51, 29, 24, 27]],
     [[13, 59, 2, 72],
     [8, 74, 86, 7],
     [37, 36, 28, 16],
     [24, 46, 20, 56],
     [10, 81, 79, 5],
     [50, 68, 52, 63],
     [29, 25, 44, 19],
     [31, 42, 14, 1],
     [4, 67, 11, 64],
     [17, 82, 78, 27],
     [22, 80, 51, 87],
     [26, 32, 41, 18],
     [39, 23, 21, 34],
     [12, 76, 84, 3],
     [55, 70, 47, 61],
     [54, 73, 48, 58],
     [40, 9, 6, 33],
     [85, 49, 53, 75],
     [45, 65, 66, 57],
     [43, 60, 30, 71],
     [88, 77, 83, 15],
     [38, 69, 35, 62]],
     [[29, 30, 9, 21],
     [47, 80, 41, 66],
     [49, 39, 17, 13],
     [72, 74, 27, 3],
     [78, 42, 68, 46],
     [59, 38, 58, 50],
     [70, 22, 8, 76],
     [69, 5, 25, 77],
     [57, 84, 62, 31],
     [18, 37, 51, 12],
     [61, 43, 45, 85],
     [65, 81, 24, 6],
     [33, 55, 28, 2],
     [35, 53, 23, 7],
     [40, 63, 48, 83],
     [67, 79, 88, 1],
     [44, 87, 73, 15],
     [56, 16, 32, 14],
     [60, 86, 4, 26],
     [71, 20, 10, 75],
     [54, 11, 19, 34],
     [82, 52, 64, 36]],
     [[63, 84, 11, 20],
     [87, 1, 59, 30],
     [54, 28, 35, 3],
     [69, 34, 78, 55],
     [70, 46, 77, 43],
     [21, 10, 67, 80],
     [79, 38, 68, 51],
     [16, 65, 15, 82],
     [2, 47, 88, 42],
     [56, 66, 33, 81],
     [26, 40, 49, 5],
     [25, 6, 86, 61],
     [52, 4, 37, 27],
     [31, 76, 71, 29],
     [22, 50, 39, 9],
     [17, 41, 48, 14],
     [60, 58, 13, 18],
     [44, 24, 45, 7],
     [85, 8, 23, 62],
     [74, 73, 36, 53],
     [19, 75, 12, 72],
     [57, 64, 83, 32]]],

}
